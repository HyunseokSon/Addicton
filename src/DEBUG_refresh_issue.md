# ğŸ” ìƒˆë¡œê³ ì¹¨ í›„ "ê²Œì„ì¤‘ í¬í•¨" ë°°ì§€ ì‚¬ë¼ì§ ë¬¸ì œ ë””ë²„ê¹… ê°€ì´ë“œ

## ğŸ“‹ ì¬í˜„ ë‹¨ê³„ í™•ì¸

### ì‹œë‚˜ë¦¬ì˜¤:
1. **ABCD ê²Œì„ ì‹œì‘** â†’ A, B, C, Dì˜ state = `playing`
2. **ìˆ˜ë™ íŒ€ ìƒì„± (A, B, E, F)** â†’ íŒ€ ìƒì„±, A/BëŠ” playing ìœ ì§€, E/FëŠ” queuedë¡œ ë³€ê²½
3. **í˜„ì¬ ìƒíƒœ í™•ì¸** (ìƒˆë¡œê³ ì¹¨ ì „):
   - "ê²Œì„ì¤‘ í¬í•¨" ë°°ì§€ í‘œì‹œë¨ âœ…
   - ê²Œì„ ì‹œì‘ ë²„íŠ¼ ë¹„í™œì„±í™”ë¨ âœ…
4. **í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨**
5. **ë¬¸ì œ ë°œìƒ**:
   - "ê²Œì„ì¤‘ í¬í•¨" ë°°ì§€ ì‚¬ë¼ì§ âŒ
   - ê²Œì„ ì‹œì‘ ë²„íŠ¼ í™œì„±í™”ë¨ âŒ

---

## ğŸ” ì½˜ì†” ë¡œê·¸ í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### 1ï¸âƒ£ **ìƒˆë¡œê³ ì¹¨ ì§í›„ - ë°ì´í„° ë¡œë”©**
```
ğŸ”„ Manual sync from Supabase...
âš¡ Batch synced all data in XXXms: X members, X players, X teams, X courts

ğŸ‘¥ Players: [
  { id: "...", name: "A", state: "???" },  â† ì—¬ê¸°ë¥¼ í™•ì¸!
  { id: "...", name: "B", state: "???" },  â† ì—¬ê¸°ë¥¼ í™•ì¸!
  { id: "...", name: "C", state: "???" },
  { id: "...", name: "D", state: "???" },
  { id: "...", name: "E", state: "queued" },
  { id: "...", name: "F", state: "queued" }
]
```

**âœ… A, Bì˜ stateë¥¼ í™•ì¸í•˜ì„¸ìš”!**

### 2ï¸âƒ£ **MatchingArea ë¡œê·¸**
```
ğŸ“‹ MatchingArea received: {
  queuedTeamsCount: X,
  queuedTeams: [
    { id: "...", name: "ìˆ˜ë™ íŒ€ 1", playerIds: [A_id, B_id, E_id, F_id], state: "queued" }
  ],
  playersCount: X,
  playingPlayers: [
    { id: "...", name: "A", state: "???" },  â† ì—¬ê¸°ë¥¼ í™•ì¸!
    { id: "...", name: "B", state: "???" },  â† ì—¬ê¸°ë¥¼ í™•ì¸!
    ...
  ],
  queuedPlayers: [...]
}
```

**âœ… playingPlayers ë°°ì—´ì— A, Bê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”!**

### 3ï¸âƒ£ **TeamCard ë¡œê·¸**
```
ğŸ¯ TeamCard [ìˆ˜ë™ íŒ€ 1]: {
  teamId: "...",
  teamState: "queued",
  playerIds: [A_id, B_id, E_id, F_id],
  teamPlayers: [
    { id: A_id, name: "A", state: "???" },  â† ì—¬ê¸°ë¥¼ í™•ì¸!
    { id: B_id, name: "B", state: "???" },  â† ì—¬ê¸°ë¥¼ í™•ì¸!
    { id: E_id, name: "E", state: "queued" },
    { id: F_id, name: "F", state: "queued" }
  ],
  hasPlayingPlayer: ???,  â† ì—¬ê¸°ë¥¼ í™•ì¸!
  buttonDisabled: ???     â† ì—¬ê¸°ë¥¼ í™•ì¸!
}
```

**âœ… hasPlayingPlayerì™€ buttonDisabled ê°’ì„ í™•ì¸í•˜ì„¸ìš”!**

---

## ğŸ¯ ì˜ˆìƒ ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„

### âœ… **ì‹œë‚˜ë¦¬ì˜¤ A: ABCD ê²Œì„ì´ ì¢…ë£Œë¨** (ì •ìƒ ë™ì‘)
```
A, B, C, D â†’ state: "waiting"
hasPlayingPlayer = false
buttonDisabled = false
```
- **ì›ì¸**: ABCD ê²Œì„ì´ ì¢…ë£Œë˜ì–´ ëª¨ë‘ waiting ìƒíƒœë¡œ ë³€ê²½
- **ê²°ê³¼**: ë²„íŠ¼ í™œì„±í™”ëŠ” **ì •ìƒ**
- **í•´ê²°**: ë¬¸ì œ ì—†ìŒ

### âš ï¸ **ì‹œë‚˜ë¦¬ì˜¤ B: ê²Œì„ ì¢…ë£Œ ì‹œ DB ì—…ë°ì´íŠ¸ ì‹¤íŒ¨**
```
ë¡œì»¬: A, B â†’ state: "waiting"
DB: A, B â†’ state: "playing"
ìƒˆë¡œê³ ì¹¨ í›„: A, B â†’ state: "playing" (DBì—ì„œ ë¡œë“œ)
hasPlayingPlayer = true
```
- **ì›ì¸**: ê²Œì„ ì¢…ë£Œ ì‹œ DB ì—…ë°ì´íŠ¸ ì‹¤íŒ¨
- **ê²°ê³¼**: ìƒˆë¡œê³ ì¹¨ í›„ **playingìœ¼ë¡œ ë³µì›**ë¨
- **í•´ê²°**: ê²Œì„ ì¢…ë£Œ ë¡œì§ í™•ì¸ í•„ìš”

### âŒ **ì‹œë‚˜ë¦¬ì˜¤ C: DBì—ì„œ ì˜ëª» ë¡œë“œë¨**
```
DB: A, B â†’ state: "playing"
ìƒˆë¡œê³ ì¹¨ í›„ ë¡œê·¸: A, B â†’ state: "waiting" ë˜ëŠ” "queued"
hasPlayingPlayer = false
```
- **ì›ì¸**: DBì—ì„œ ë°ì´í„°ë¥¼ ì˜ëª» ë¡œë“œ
- **ê²°ê³¼**: players ë°°ì—´ì´ ë¶ˆì™„ì „
- **í•´ê²°**: syncFromSupabase ë¡œì§ ìˆ˜ì • í•„ìš”

### ğŸ”´ **ì‹œë‚˜ë¦¬ì˜¤ D: ABCD ê²Œì„ì´ ì§„í–‰ ì¤‘ì¸ë°ë„ ë²„íŠ¼ í™œì„±í™”**
```
ì½”íŠ¸: ABCD ê²Œì„ ì§„í–‰ ì¤‘
DB: A, B â†’ state: "playing"
ìƒˆë¡œê³ ì¹¨ í›„ ë¡œê·¸: A, B â†’ state: "playing"
TeamCard ë¡œê·¸: hasPlayingPlayer = false âŒâŒâŒ
```
- **ì›ì¸**: **ì¹˜ëª…ì  ë²„ê·¸!**
- **ê²°ê³¼**: players ë°°ì—´ì´ TeamCardì— ì „ë‹¬ë˜ì§€ ì•ŠìŒ
- **í•´ê²°**: ì¦‰ì‹œ ìˆ˜ì • í•„ìš”

---

## ğŸ“ ì¬í˜„ í›„ ë³´ê³  ì–‘ì‹

### ì¬í˜„ ì‹œ ë‹¤ìŒ ì •ë³´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”:

1. **ABCD ê²Œì„ ìƒíƒœ**:
   - [ ] ì—¬ì „íˆ ì§„í–‰ ì¤‘ (ì½”íŠ¸ì— í‘œì‹œë¨)
   - [ ] ì¢…ë£Œë¨

2. **ì½˜ì†” ë¡œê·¸ - syncFromSupabase**:
   ```
   ğŸ‘¥ Players: [Aì˜ state: ???, Bì˜ state: ???]
   ```

3. **ì½˜ì†” ë¡œê·¸ - MatchingArea**:
   ```
   playingPlayers: [A, Bê°€ ì—¬ê¸° ìˆë‚˜ìš”? yes/no]
   ```

4. **ì½˜ì†” ë¡œê·¸ - TeamCard**:
   ```
   hasPlayingPlayer: ???
   buttonDisabled: ???
   ```

5. **UI ìƒíƒœ**:
   - [ ] "ê²Œì„ì¤‘ í¬í•¨" ë°°ì§€ í‘œì‹œë¨
   - [ ] ê²Œì„ ì‹œì‘ ë²„íŠ¼ ë¹„í™œì„±í™”ë¨
   - [ ] ë²„íŠ¼ í´ë¦­ ì‹œ ë°˜ì‘ ì—†ìŒ

---

## ğŸ”§ ì„ì‹œ í•´ê²°ì±… (ë””ë²„ê¹… ì¤‘)

í˜„ì¬ ìƒíƒœë¡œëŠ” **3ë‹¨ê³„ ë°©ì–´ ì‹œìŠ¤í…œ**ì´ ì‘ë™ ì¤‘:
1. âœ… TeamCard UIì—ì„œ ë²„íŠ¼ ë¹„í™œì„±í™”
2. âœ… startGame ë°±ì—”ë“œ ê²€ì¦
3. âœ… startAllQueuedGames í•„í„°ë§

**ë§Œì•½ ABCD ê²Œì„ì´ ì§„í–‰ ì¤‘ì¸ë° ë²„íŠ¼ì´ í™œì„±í™”ë˜ì–´ë„:**
- startGameì´ ì°¨ë‹¨í•¨
- ê²Œì„ì€ ì‹œì‘ë˜ì§€ ì•ŠìŒ
- ë‹¨ì§€ UXê°€ í˜¼ë€ìŠ¤ëŸ¬ìš¸ ë¿

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

ì½˜ì†” ë¡œê·¸ë¥¼ í™•ì¸í•œ í›„:
- **ì‹œë‚˜ë¦¬ì˜¤ A**: ë¬¸ì œ ì—†ìŒ
- **ì‹œë‚˜ë¦¬ì˜¤ B**: ê²Œì„ ì¢…ë£Œ ë¡œì§ ê°•í™”
- **ì‹œë‚˜ë¦¬ì˜¤ C**: ë°ì´í„° ë¡œë”© ìˆ˜ì •
- **ì‹œë‚˜ë¦¬ì˜¤ D**: ê¸´ê¸‰ ë²„ê·¸ ìˆ˜ì •

ë¡œê·¸ë¥¼ ê³µìœ í•´ì£¼ì‹œë©´ ì •í™•í•œ í•´ê²°ì±…ì„ ì œì‹œí•˜ê² ìŠµë‹ˆë‹¤! ğŸ”
